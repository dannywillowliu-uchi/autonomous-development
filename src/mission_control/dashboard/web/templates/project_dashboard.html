<main class="grid" data-project="{{ project_name }}" data-mode="{{ mode|default('rounds') }}">
	<!-- Mission header -->
	<section class="card span-full"
		hx-get="/project/{{ project_name }}/partials/mission-header"
		hx-trigger="load, every 2s"
		hx-swap="innerHTML">
	</section>

	<!-- Live status banner -->
	<section class="card span-full"
		hx-get="/project/{{ project_name }}/partials/live-status"
		hx-trigger="load, every 2s"
		hx-swap="innerHTML">
	</section>

	{% if mode == 'continuous' %}
	<!-- Continuous mode: status + event timeline -->
	<section class="card span-2">
		<h2>Continuous Status</h2>
		<div hx-get="/project/{{ project_name }}/partials/continuous-status"
			hx-trigger="load, every 2s"
			hx-swap="innerHTML">
		</div>
	</section>

	<section class="card">
		<h2>Work Units</h2>
		<div hx-get="/project/{{ project_name }}/partials/work-units"
			hx-trigger="load, every 2s"
			hx-swap="innerHTML">
		</div>
	</section>

	<section class="card span-full">
		<h2>Event Timeline</h2>
		<div hx-get="/project/{{ project_name }}/partials/event-timeline"
			hx-trigger="load, every 3s"
			hx-swap="innerHTML">
		</div>
	</section>
	{% else %}
	<!-- Rounds mode: workers + units + merge queue -->
	<section class="card span-2">
		<h2>Workers</h2>
		<div hx-get="/project/{{ project_name }}/partials/worker-pool"
			hx-trigger="load, every 2s"
			hx-swap="innerHTML">
		</div>
	</section>

	<section class="card">
		<h2>Work Units</h2>
		<div hx-get="/project/{{ project_name }}/partials/work-units"
			hx-trigger="load, every 2s"
			hx-swap="innerHTML">
		</div>
	</section>

	<section class="card">
		<h2>Merge Queue</h2>
		<div hx-get="/project/{{ project_name }}/partials/merge-queue"
			hx-trigger="load, every 2s"
			hx-swap="innerHTML">
		</div>
	</section>

	<section class="card span-2">
		<h2>Round Timeline</h2>
		<div hx-get="/project/{{ project_name }}/partials/round-timeline"
			hx-trigger="load, every 5s"
			hx-swap="innerHTML">
		</div>
	</section>
	{% endif %}

	<section class="card">
		<h2>Discoveries</h2>
		<div hx-get="/project/{{ project_name }}/partials/discoveries-feed"
			hx-trigger="load, every 5s"
			hx-swap="innerHTML">
		</div>
	</section>

	<!-- Charts row -->
	<section class="card">
		<h2>Score History</h2>
		<canvas id="chart-score-{{ project_name }}"></canvas>
	</section>

	<section class="card">
		<h2>Test Trend</h2>
		<canvas id="chart-tests-{{ project_name }}"></canvas>
	</section>

	<section class="card">
		<h2>Cost / Round</h2>
		<canvas id="chart-cost-{{ project_name }}"></canvas>
	</section>

	<!-- Live log tail -->
	<section class="card span-full">
		<h2>Live Log</h2>
		<div hx-get="/project/{{ project_name }}/partials/log-tail"
			hx-trigger="load, every 3s"
			hx-swap="innerHTML">
		</div>
	</section>

	<!-- Activity log -->
	<section class="card span-full">
		<h2>Activity Log</h2>
		<div hx-get="/project/{{ project_name }}/partials/activity-log"
			hx-trigger="load, every 2s"
			hx-swap="innerHTML">
		</div>
	</section>
</main>

<script>
	// Initialize charts for this project
	(function() {
		initProjectCharts("{{ project_name }}");
	})();
</script>
