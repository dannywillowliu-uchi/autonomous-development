<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Mission Control</title>
	<script src="https://unpkg.com/htmx.org@2.0.4"></script>
	<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.7/dist/chart.umd.min.js"></script>
	<link rel="stylesheet" href="/static/dashboard.css">
</head>
<body>
	<header class="top-bar">
		<h1>Mission Control</h1>
	</header>

	<main class="grid">
		<!-- Mission header -->
		<section class="card span-full"
			hx-get="/partials/mission-header"
			hx-trigger="load, every 2s"
			hx-swap="innerHTML">
		</section>

		<!-- Worker pool -->
		<section class="card span-2">
			<h2>Workers</h2>
			<div hx-get="/partials/worker-pool"
				hx-trigger="load, every 2s"
				hx-swap="innerHTML">
			</div>
		</section>

		<!-- Work units -->
		<section class="card">
			<h2>Work Units</h2>
			<div hx-get="/partials/work-units"
				hx-trigger="load, every 2s"
				hx-swap="innerHTML">
			</div>
		</section>

		<!-- Merge queue -->
		<section class="card">
			<h2>Merge Queue</h2>
			<div hx-get="/partials/merge-queue"
				hx-trigger="load, every 2s"
				hx-swap="innerHTML">
			</div>
		</section>

		<!-- Charts row -->
		<section class="card">
			<h2>Score History</h2>
			<canvas id="chart-score"></canvas>
		</section>

		<section class="card">
			<h2>Test Trend</h2>
			<canvas id="chart-tests"></canvas>
		</section>

		<section class="card">
			<h2>Cost / Round</h2>
			<canvas id="chart-cost"></canvas>
		</section>

		<!-- Activity log -->
		<section class="card span-full">
			<h2>Activity Log</h2>
			<div hx-get="/partials/activity-log"
				hx-trigger="load, every 2s"
				hx-swap="innerHTML">
			</div>
		</section>
	</main>

	<script src="/static/dashboard.js"></script>
</body>
</html>
