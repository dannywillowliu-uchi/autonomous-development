[target]
name = "autonomous-dev-scheduler"
path = "/Users/dannyliu/personal_projects/autonomous-development"
branch = "main"
objective = """Evolve mission control from a task executor into an autonomous engineering lead. Currently, a human must decide what to build, architect solutions, and visually verify results. Build the foundation for the system to do this itself. Focus areas:

1. STRATEGIST AGENT: Add a strategy layer that runs before discovery. It reads BACKLOG.md, git history (last 20 commits), past mission reports from the DB, and the priority queue. It produces a focused mission objective autonomously. Implementation: new file src/mission_control/strategist.py with a Strategist class. Method propose_objective() calls Claude with the gathered context and returns a proposed objective string plus rationale. Add a --strategist flag to the CLI that runs the strategist before the mission starts. The proposed objective is shown to the user for approval (or auto-approved with --approve-all).

2. STRATEGIC CONTEXT ACCUMULATION: Add a rolling strategic context that persists across missions. After each mission, the strategist appends a brief summary to a strategic_context table in SQLite: what was attempted, what worked, what didn't, what the recommended next direction is. This context feeds into future propose_objective() calls. Add get_strategic_context() and append_strategic_context() to db.py.

3. EXPERIMENT MODE: Add an experiment execution mode alongside the existing implementation mode. Experiment units produce comparison reports rather than merged commits. Implementation: add experiment_mode field to WorkUnit. In the worker prompt, experiment units are told to try N approaches (default 2), benchmark each, and report which is better with data. The result is a JSON comparison report stored in the DB (new experiment_results table). No merge to green -- experiments are informational. Add a --experiment flag to the CLI for experiment-only missions.

4. MISSION CHAINING: Add ability to chain missions so the output of one feeds the next. Implementation: add next_objective field to ContinuousMissionResult. When a mission completes, if the strategist determines follow-up work is needed, it sets next_objective. Add a --chain flag to the CLI that automatically starts the next mission using the chained objective. Max chain depth configurable (default 3).

5. AMBITION SCORING: Add self-evaluation of mission ambition. After planning but before execution, score the planned work on a 1-10 ambition scale: 1-3 = busywork (lint fixes, minor refactors), 4-6 = moderate (new features, meaningful improvements), 7-10 = ambitious (architecture changes, new systems, multi-file refactors). Log the score. If ambition < 4 and there are higher-priority backlog items, the strategist should suggest replanning with a more ambitious objective. Add ambition_score to the mission DB record.

Each unit: implement the feature, add tests, ensure all existing tests pass. Read BACKLOG.md for the full spec (Autonomous Engineering Lead section)."""

[target.verification]
command = ".venv/bin/python -m pytest -q && .venv/bin/ruff check src/ tests/"
timeout = 300

[scheduler]
session_timeout = 2700
cooldown = 5
max_sessions_per_run = 50
model = "opus"
monitor_interval = 5
output_summary_max_chars = 4000

[scheduler.git]
strategy = "branch-per-session"
auto_merge = false

[scheduler.budget]
max_per_session_usd = 10.0
max_per_run_usd = 500.0

[scheduler.parallel]
num_workers = 2
pool_dir = "/Users/dannyliu/personal_projects/.mc-pool-ads"
warm_clones = 2

[rounds]
max_rounds = 20
stall_threshold = 5
cooldown_between_rounds = 5
max_discovery_chars = 4000
max_discoveries_per_round = 10
max_summary_items = 5
timeout_multiplier = 1.5
stall_score_epsilon = 0.01

[planner]
max_depth = 2
max_children_per_node = 5
budget_per_call_usd = 2.0

[continuous]
max_wall_time_seconds = 14400
backlog_min_size = 1
timeout_multiplier = 1.5

[green_branch]
working_branch = "mc/working"
green_branch = "mc/green"
fixup_max_attempts = 5
auto_push = true
push_branch = "main"

[discovery]
enabled = true
tracks = ["feature", "quality", "security"]
max_items_per_track = 3
min_priority_score = 3.0
model = "opus"
budget_per_call_usd = 5.0
research_enabled = true
research_model = "sonnet"
research_parallel_queries = 3

[heartbeat]
interval = 300
idle_threshold = 3

[notifications.telegram]
# bot_token and chat_id read from env vars TELEGRAM_BOT_TOKEN / TELEGRAM_CHAT_ID
on_heartbeat = true
on_merge_fail = true
on_mission_end = true

[backend]
type = "local"
