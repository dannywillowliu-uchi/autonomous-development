[target]
name = "autonomous-dev-scheduler"
path = "/Users/dannyliu/personal_projects/autonomous-development"
branch = "main"
objective = """Implement the top-priority improvements discovered via codebase analysis:

1. DEPENDENCY-AWARE DISPATCH: The dispatch loop in continuous_controller.py dispatches all units in parallel without checking depends_on. Modify the dispatch logic to respect dependency ordering -- units with unresolved dependencies must wait until their blockers complete. Add tests.

2. SMOKE-TEST VERIFICATION BEFORE MERGE: GreenBranchManager.merge_unit() merges directly to mc/green without verification. Add a lightweight smoke-test step (run the verification command) BEFORE merging to mc/green. Only merge if verification passes. Add tests.

3. SANDBOX TOOL SYNTHESIS: tool_synthesis.py writes arbitrary Python scripts from worker output directly to disk with no validation. Add content validation (no imports of dangerous modules, no file system access outside project), and restrict execution to a sandboxed subprocess. Add tests.

Each feature: implement, add tests, ensure all existing tests pass."""

[target.verification]
command = ".venv/bin/python -m pytest -q && .venv/bin/ruff check src/ tests/"
timeout = 300

[scheduler]
session_timeout = 900
cooldown = 5
max_sessions_per_run = 50
model = "opus"
monitor_interval = 5
output_summary_max_chars = 4000

[scheduler.git]
strategy = "branch-per-session"
auto_merge = false

[scheduler.budget]
max_per_session_usd = 10.0
max_per_run_usd = 200.0

[scheduler.parallel]
num_workers = 2
pool_dir = "/Users/dannyliu/personal_projects/.mc-pool-ads"
warm_clones = 2

[rounds]
max_rounds = 20
stall_threshold = 5
cooldown_between_rounds = 5
max_discovery_chars = 4000
max_discoveries_per_round = 10
max_summary_items = 5
timeout_multiplier = 1.5
stall_score_epsilon = 0.01

[planner]
max_depth = 2
max_children_per_node = 5
budget_per_call_usd = 2.0

[continuous]
max_wall_time_seconds = 3600
backlog_min_size = 1
timeout_multiplier = 1.5
min_ambition_score = 4
max_replan_attempts = 2
verify_objective_completion = true
max_objective_checks = 2

[review]
gate_completion = false
min_review_score = 3.0

[green_branch]
working_branch = "mc/working"
green_branch = "mc/green"
fixup_max_attempts = 5
auto_push = true
push_branch = "main"

[discovery]
enabled = true
tracks = ["feature", "quality", "security"]
max_items_per_track = 3
min_priority_score = 3.0
model = "opus"
budget_per_call_usd = 5.0
research_enabled = true
research_model = "sonnet"
research_parallel_queries = 3

[heartbeat]
interval = 300
idle_threshold = 3

[notifications.telegram]
# bot_token and chat_id read from env vars TELEGRAM_BOT_TOKEN / TELEGRAM_CHAT_ID
on_heartbeat = true
on_merge_fail = true
on_mission_end = true

[backend]
type = "local"
